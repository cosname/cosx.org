---
title: 2017 年统计之都网站改版说明
author: 谢益辉
date: '2017-07-18'
categories:
  - 新闻动态
tags:
  - blogdown
  - Flarum
  - Hugo
  - Markdown
  - R Markdown
  - 统计之都
  - 网站
  - 论坛
  - 历史
slug: cos-new-site
forum_id: 419224
meta_extra: "[审稿](https://github.com/cosname/cosx.org/pull/631)：朱雪宁、边蓓蕾、郎大为、邱怡轩；微信编辑：杨舒仪"
---

如[小轩哥所说](https://d.cosx.org/d/419190)：是的，没有错，我们又双叒叕改版换系统了。我都快记不清统计之都从 2006 年成立至今到底改过几次版了，于是我去万能的时光机器上[看了一眼](http://web.archive.org/web/*/cos.name)，顺便忆苦思甜了一番。我把这些鸡毛蒜皮的事情放在了本文的附录中，下面先说正事。

# 为什么

为什么又改版了？答案很简单：不喜欢、不方便。我们的主站用了近十年的 WordPress，我们捉襟见肘的技术人员已经快被逼疯，不想再对付安全漏洞。江湖传言 WordPress 就是一个远程控制工具，所有人都能远程登录你的服务器，除了你自己。我们只不过是想发发文章而已，肿么就变成了要一天到晚维护服务器了。另一方面，过去用户就算想投稿，也只能通过邮件方式。投稿审稿都只能在暗地里进行，效率太低。嗯，别提什么 WordPress 投稿插件了：多一个插件多一种漏洞可能。

至于统计之都的论坛，我们这些年也用过好几个系统。要么太臃肿，要么太朴素（我的错，这个锅我背）。如今我们冒险启用了 Flarum 系统，它连正式版都没发布，开发版已经放出来好几年，我也等了好几年，再等下去，我自己都不想看 COS 论坛了（没有系统通知、没有帖子标签、不支持 Markdown，实在不便）。这个冒险是否值得，我也不知道。

# 改了什么

## 域名

首先，我们把域名从 cos.name 迁移到了 [cosx.org](https://cosx.org)。去年我写统计之都十周年纪念文章的时候，仍然还有读者问，.name 是个什么鬼，为啥不是 .com。为了不再苦笑着回答这个问题，我们决定启用一个常见而正式的域名扩展名，也就是 .org（组织），它也比较符合统计之都的身份。别问为什么不是 cos.org，我们穷还不行吗，要能给我们一个亿，分分钟把 cos.org 买回来让您开心。那这个 x 如何解释？您可以想象为余弦函数 `$\cos(x)$`，或者英文单词“扩展”（extension）的意思，就像 TEDx / docx 一样。若懒得琢磨，就让 x 代表未知吧。

论坛由于系统架构不同，我们放在了子域名 https://d.cosx.org 中。可能有好事者会问，d 又是什么意思。本算命先生可以翻着白眼掐指再解释一下：d 就是微分算子，余弦函数的微分是啥子？`$-\sin(x)$`。翻译过来就是不作恶。据说现在流行一本正经的胡说八道。正经的说法是，d 是 discussion 的缩写。

大多数旧的 cos.name 链接应该都会被自动重定向到新域名，包括主站文章和论坛帖子。若有遗漏的情况（打开链接看见 404 错误页面），还请大家留言提醒我们修正。所有旧的 cos.name 邮箱（如编辑部邮箱）都继续有效，我们将来可能会酌情启用新邮箱，但旧邮箱会永久有效，所以您可以不必更新您的通讯录。

## 主站

这次改版让主站从 WordPress 迁移到了静态网站，基于 [Hugo](https://gohugo.io) 和 [blogdown](https://github.com/rstudio/blogdown) 搭建。在系统方面感觉瘦身了七八十斤，同时也让整个统计之都主站变得绝对透明（参见我们的 Github 库 [cosname/cosx.org](https://github.com/cosname/cosx.org)）。投稿格式变成了广大群众喜闻乐见的 Markdown，便宜量又足；就算你没听说过 Markdown，只要你会打字写邮件，你就一定能在几分钟之内掌握 Markdown 的基本语法。因为我们的主站源文件放在 Github 上，所以对 Github 有一定了解的读者可以很方便通过 Github 合并请求（Pull request）为我们投稿，我们也可以在线审稿。详情参见本站[投稿指南](/contribute/)。我坚信合并请求是合作的未来，不仅仅是软件开发的合作，更可以是文章、写作的合作。电子邮件和 LaTeX 都是人类进步的天敌。知识就该以最简洁、最透明的方式传播（看不看、学不学取决于您自个儿），否则就算皓首穷经，也只是把知识装在了一个人的脑子里。

对不熟悉 Github 的人来说，刚开始发送合并请求可能会有这样那样的问题，还可能会被残酷的编辑虐。莫方，发两篇稿件之后您大概就能适应这个流程了，也会体会到它的优越之处，绝对比邮件往来高效得多。

新的主站还提供了一个特殊的渠道，让您作为一个普通读者可以为我们做贡献。这就是每篇文章的标题右上方的“编辑本页”链接。若您在阅读过程中发现任何问题（比如错别字），请您点击这个链接，它会引导您在 Github 上修改我们的源文件（您得有 Github 账号），最终给我们发送合并请求。修改错别字应该是入门的最佳路径，所以我们非常鼓励您带着鹰的眼睛来阅读统计之都的文章并努力发现问题。另一项我们非常需要广大读者帮助的是[清理旧文章的关键词](https://github.com/cosname/cosx.org/issues/6)，若您发现某篇文章的关键词不准确或不详细，欢迎编辑文章源文件并发合并请求。如果您非常迫切希望帮助统计之都，请留心我们的 [Github 事项](https://github.com/cosname/cosx.org/issues/)页面，那里永远都有做不完的任务。我们期待在[贡献者列表](https://github.com/cosname/cosx.org/graphs/contributors)中看到您的名字。

主站首页在宽屏模式下采用三栏式排版，显示文章栏目、标题、摘要、作者、日期等信息。随着屏幕变窄，它会自动变为两栏、单栏（如手机屏幕）。默认字体在苹果系统下为宋体，Windows 下为微软雅黑。若您对这两种字体都感到厌倦了，可以考虑安装免费开源又漂亮的[思源宋体](https://source.typekit.com/source-han-serif/cn/)（若没有兴趣阅读下载说明，请[直接点此链接下载](https://github.com/adobe-fonts/source-han-serif/raw/release/SubsetOTF/SourceHanSerifCN.zip)安装）。少数位置我们使用了楷体，如引用文字和代码。

主站文章的评论区与论坛相连，想要发表评论必须先要有论坛账号。闲着没事儿的时候可以把页面底部的所有链接都点一遍玩儿，它们会让您更熟悉本站的结构。

## 论坛

论坛从 bbPress 系统换到了 Flarum，变化比较多，但所有原系统里的帖子都被导入新系统了，所以内容都还在。原论坛的用户名密码也全都转移到新系统，您不必重新注册新用户名，若忘了密码，可以用找回密码功能（QQ 邮箱用户可能收不到邮件，可以给我们发邮件，我们协助您修改邮箱和密码）。最大的变化应该是论坛从版块式管理变成了标签式管理，我们不再主观设定版块，而是用帖子标签对帖子进行分类；从今往后，请您发帖时注意选择恰当的标签，不然小心版主批评您（开玩笑的，版主只会默默修改掉您的标签）。标签式管理的最大好处是扩展性强得多，您要是有什么好的话题建议，我们可以酌情增加新的标签。这里面有无数的新的可能性，请留意未来我们的论坛帖子以及通知。

另一个便民之处是站内提醒，所有您发起或参与过的话题若有更新，您会在顶部工具栏上看见那让人永远都想戳的小红点。过去的论坛由于没有通知和提醒系统，就算您的问题有人回答了，您也不知道。新论坛里您也可以很方便收藏您关心的帖子，以备将来再查阅。

当然，不能不提的是，新论坛美啊。我个人常年混迹[爆栈网](https://stackoverflow.com)，就是因为它简洁高效，但那毕竟是歪果仁的网站，对中土大唐人士来说不是那么亲切。经过这次改版，我觉得终于重拾了回到中文论坛的动力。

希望各位也喜欢新论坛，并尽力互相帮助。提问者请多走心，别让人挤牙膏，问题中提供的信息要宁滥毋缺；能贴代码的就别截图；论坛上问题一大串，建议不要攀比谁更能惜字如金（如标题一共就四个字“新手求助”或“紧急求助”）。论坛也是大家分享所见所闻所想的地方，不一定非得问问题。

另外，我们需要大量版主，主要是帮大家修正帖子标题和标签，让标题更明确、标签分类更清晰。我们有无数的旧帖子需要修正，因为过去我们没在这些问题上较真，但希望今后论坛能变得井然有序。偶尔我们也许要版主帮忙修正帖子内容，如错误格式。我们对版主的要求就两点：认真、负责。如何叫认真？我们可以把丰子恺写的《怀李叔同先生》作为我们的目标。如何是负责？就是不要滥用权力，只帮助提问者改进问题。原则上我们不接受论坛新人做版主。虽然我们没有硬性要求，但最好是在 COS 论坛活跃超过半年的会员。如果有兴趣加入版主队伍，欢迎与我们联系。

# 鸣谢

关于这个新的 cosx.org 域名，我们要特别鸣谢北京航空航天大学的张扬扬同学，因为他的慷慨，我们才拿到这个域名。他日若能跟统计之都的成员相逢，我们请你喝酒。

然后我们要重点鸣谢的是统计之都编辑部的小伙伴们，历时几个月的改版过程中，有太多可歌可泣的英雄小哥哥小姐姐。我就说一件事就可以吓死你们：刚启动改版进程的时候，我们已经有 483 篇文章，当时是乱糟糟的 Markdown 源文件，为了把这一篇篇文章清理干净，我们征用了大量~~人柱力~~人力资源（详情参见[这个 Github 事项](https://github.com/cosname/cosx.org/issues/4)）。我已记不清也不可能记清我们清理了多少 HTML 标签（为了让 Markdown 内容更整洁）以及修正了多少数学公式（有些文章的数学公式真是多到让人嘤嘤嘤，靳志辉同学你不要跑，来发表个获奖感言吧）。我们感谢杨舒仪、覃文锋、李宇轩、闫晗、王佳、于嘉傲、翟晋、雷博文、范超、闫施、邓金涛、成慧敏、侯澄钧、张晔、边蓓蕾、郎大为任劳任怨把所有历史文章用肉眼阅读并手工清理了一遍，其中也有黄俊文、何通的部分自动清理功劳。

这一群人中，我们要重点表彰急先锋郎大为，他一个人活生生改了 N 篇（算了，我已经眼花数不清）文章，每次我说“再往你碗里分点儿任务？”他总说“猴啊猴啊”；不仅如此，他还审阅了无数别人的修改。另一个我觉得需要重点表彰的是边蓓蕾，真是一条好汉，胆大心细，她修了大量的数学公式（写支持向量机那几篇文章的是谁，放学了别走），还审阅了无数的合并请求。这世上三条腿的蛤蟆好找，而对十年前的文章不抛弃不放弃的网站和人，恐怕还不是那么好找。他们应该不是迫于我的淫威或碍于面子才做的这么些苦力活儿吧（别告诉我真相，我不想知道）。

编辑部的主编大人朱雪宁一直仔细着给大家分配任务、积极安排人力填补空缺，运筹帷幄统领大局（其间还得抽空自己去博士答个辩什么的），让这个浩大的编辑工程能顺利收工。

内容清理完成之后，我们又经历了几圈主题样式的辩论。我个人是极端的极简主义者，而多亏众人以死相逼（郎大为连红包都掏出来了），才让这个主题有了很多惊喜的改进。我尚在犹豫着要不要感谢会鸽的小编，去年在《[你若是雄狮，何须咆哮](https://sanwen8.cn/p/10fgjUG.html)》一文中夸奖我们的“文案看也看不下去、版面设计丑到爆”，也是给了我们很大的改版动力。

本次改版论坛部分由我们敬爱的小轩哥几乎独自一人扛下。他是电，他是光，他是唯一的神话。每次我请他办点什么事，他总是一脸愁容，天空飘来五个字，“臣妾做不到”，然而最后总是做到了。请小轩哥办的事，他基本上都是超额完成。子在川上曰，[靠谱如厮夫](https://yihui.name/cn/2017/03/copss/)。<!-- 轩哥生日快乐！ -->

最后，对本次改版，我们还需要感谢 Github 提供了一个方便而免费的合作平台、Netlify 提供了贴心而免费的静态网站部署服务、Hugo 提供了一个高效而免费的静态网站编译工具、Algolia 提供了难得而（基本）免费的[搜索](/search/)服务、Travis CI 提供了省心而免费的自动化工具、RStudio 提供了简单而免费的 R Markdown 系列工具、Pandoc 提供了厉害而免费的 Markdown 转换工具，Flarum 提供了精致而免费的论坛系统。感觉我们好像都有一个[光明的前途](https://book.douban.com/review/1037410/)。

# 附录（统计之都网站十年变迁）

时光机器对统计之都网站的最早一次收录是 2006 年 5 月 10 日。各位可以看见当年我刚注册完 cos.name 域名之后随手写的一个首页：

![统计之都最初的首页](https://user-images.githubusercontent.com/163582/28289963-3e25769a-6b0a-11e7-9319-971e786e2ec1.png)

那时候我还是用 Dreamweaver 写 HTML 页面，上面的截图中有一串问号，就是因为我当时用了 GB2312 编码，现在汉字显示不对。换作今天，谁要是不用 UTF-8 编码我一定会跟谁翻脸。下面我随手截了一些这几年首页的快照，大家可以随意看着玩儿；若对前几幅图还有印象的话，您大约已经伴随着统计之都的成长念完学士、硕士、博士、圣斗士毕业好些年了。想想上面这个网页挂出来的时候，我们的心雨主席（2016 年北京 R 会议）还在小学里掰着指头算小明与小红的追及问题，如今人都读博士了，也是蛮好玩的。

# 2006/05/27

最初的主站是用一套叫 MePHP 的内容管理系统搭建的，长这样（刚开张还有很多栏目空白）：

![第一版统计之都网站](https://user-images.githubusercontent.com/163582/28289976-4991b1b0-6b0a-11e7-89f6-18b66245f12f.png)

# 2006/11/25

随后脑子一热，想搞英文版的网站。事实是根本搞不起来，吸引过两三个华人留学生，但动力极弱。于是垮了。后来我出国之后又试图折腾过一次英文版论坛，仍然失败。

![中英文网站](https://user-images.githubusercontent.com/163582/28290052-84d2cffc-6b0a-11e7-9802-c5dee658abe7.png)

# 2007/10/11

一年后内容稍微有些充实，但仍然有空白。可见约稿之难。总是写的人少，看的人多。那时候最流行的仍然是各类软件下载，如今终于天下太平了（托自由软件的福）。李浩成（我的同学）大概是这个网站最积极的贡献者，来帖必复。我写了不少我现在没有勇气再看的文章，还一个劲给师兄弟姐妹打鸡血，让他们写文章。现在要问张晓牟啥是《统计学的历史与今天》，估计她八成想不起来，当然我也想不起来。

![前进中的第一版网站](https://user-images.githubusercontent.com/163582/28290145-d63cc88e-6b0a-11e7-9c9c-1fb88911c224.png)

# 2010/04/24

大约是 2008 年什么时候，我们从 MePHP 搬到了流行的 WordPress 系统，在这里面一直待到今年。最初我找了一个杂志主题，如下图。后来这个主题也被某知名 R 聚合博客采用，不过它用了这个主题放广告而已，页面丑得吓人。统计之都从建站之初就对广告控制得非常严格，坚持读者阅读体验优先，没事绝不扰民。

那时候我还是用 Fireworks 编辑图片，这一版主题的横幅里的直方图和折线图是我根据统计之都的日访问量在 R 里面画出来的（ggplot2 还没诞生）。我那时候大约对华文隶书比较着迷。

![2008年改到了 WordPress](https://user-images.githubusercontent.com/163582/28290227-38ae2fb2-6b0b-11e7-9ec9-d2bc47d47391.png)

# 2011/06/28

我忘了是什么原因，可能是这个杂志样式看起来太古旧，2010 年的感恩节我[把主题给换了](https://yihui.name/cn/2010/12/fighting-like-a-pig/)。我对豆腐块样式的痴迷就是从那时候埋下了种子。顺便说一下，统计之都的大红印图标也从更专业的设计师（李龑）手里诞生了，它奠定了此后统计之都网站的红色调基础。

![2011年改版杂志样式](https://user-images.githubusercontent.com/163582/28297828-9cdb8230-6b35-11e7-8e6f-c44f4ec337d0.png)

# 2012/12/31

我们从来都没有专业的网站技术人士，我和小轩哥的三脚猫功夫勉强撑了这些年，中间曾有更专业的人来过，但我们没有把握好机会，等到失去才追悔莫及。这些年网站总是被黑客袭击，我们曾感到无限苦恼。后来大约是这个原因，某一次上面的那个主题在网站被攻击之后丢失了，我们只好退回到了 WordPress 的默认主题。辛辛苦苦多少年，一夜回到解放前。

![2012年退回到 WordPress 默认样式](https://user-images.githubusercontent.com/163582/28297896-eba73076-6b35-11e7-9fa1-66cdb194632f.png)

# 2013/11/30

虽然不专业，但我们也忍不了默认主题，起码得有个配色协调性，于是小轩哥操刀把主题改回了红色调。这一撑，又是四年过去。

![2013年轩哥大红主题](https://user-images.githubusercontent.com/163582/28297948-2d490b9e-6b36-11e7-8543-2d03e713c0c7.png)

# 2017/07/17

然后终于到了今天。改版的事情几年前就开始讨论了，讨论来讨论去，想过各种可能，最终也没个结果。我们受够了 WordPress 的安全漏洞以及投稿的不便，迫切想跳出这个大坑。2016 年年底我阴差阳错开始捣鼓基于 R Markdown 的静态网站工具，看上了 Hugo，感觉什么都有了，就缺个 R Markdown。于是花了半年时间把这个工具基本打磨完成。种了[几](https://rviews.rstudio.com)亩[试](https://blog.rstudio.com)验田之后，我觉得是时候磨刀霍霍向 COS 了。

![2017年夏天的改版](https://user-images.githubusercontent.com/163582/28298034-ab8c2d4c-6b36-11e7-9de3-e74aeba0bf7a.png)

这肯定不会是最终的样式，接下来我们还会做各种微调。我们没有专业的设计师，都是野路子学的网页设计，当前这个主题完全是从零写起的，没用任何现成 CSS 框架，JavaScript 的使用也只是微量，所以还望轻拍。再过两年，也许我们又会不安分，但那时候再改，可能就会容易很多了，毕竟整个网站只是一堆 R Markdown 文件而已，没了什么数据库、密码之类的。

网站主题这种东西，从来都不可能让所有人满意，但我们的总体指导原则是：您来了，我们先为您呈现最重要的元素，也就是文章。希望这次改版能让各位心无旁骛地阅读统计之都为您编辑的作品。当然，若您想投稿，我们更是求之不得。
